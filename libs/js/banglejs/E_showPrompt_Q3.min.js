(function(r,h){h||(h={});h.buttons||(h.buttons={Yes:!0,No:!1});var q=require("locale"),n=Object.keys(h.buttons),t=[];g.clear(1);Bangle.drawWidgets();if(!r)return Bangle.setUI(),Promise.resolve();(function(){g.reset().setFont("6x8",2).setFontAlign(0,0);var d=g.getWidth(),k=g.getHeight(),e=g.getFontHeight(),l=g.wrapString(h.title,d-2),u=g.wrapString(r||"",d-2);l&&g.setColor(g.theme.fgH).setBgColor(g.theme.bgH).clearRect(0,24,d-1,28+l.length*e).drawString(l.join("\n"),d/2,26+
l.length*e/2);g.setColor(g.theme.fg).setBgColor(g.theme.bg).drawString(u.join("\n"),d/2,(k+l.length*e-40)/2);var m=0;n.forEach(f=>m+=24+g.stringWidth(q.translate(f)));m>d&&(g.setFont("6x8"),m=0,n.forEach(f=>m+=24+g.stringWidth(q.translate(f))));var a=(d-m)/2,c=k-40;n.forEach((f,p)=>{f=q.translate(f);p=g.stringWidth(f);a+=(24+p)/2;var b=6+p/2;t.push({x1:a-b,x2:a+b,y1:c-24,y2:c+24});b=[a-b,c-16,a+b,c-16,a+b+4,c-12,a+b+4,c+12,a+b,c+16,a-b,c+16,a-b-4,c+12,a-b-4,c-12,a-b,c-16];g.setColor(g.theme.bg2).fillPoly(b).setColor(g.theme.fg2).drawPoly(b).drawString(f,
a,c+1);a+=(24+p)/2});g.setColor(g.theme.fg).flip()})();return new Promise(d=>{Bangle.setUI("touch",k=>{t.forEach((e,l)=>{k.x>=e.x1&&k.x<=e.x2&&k.y>=e.y1&&k.y<=e.y2&&(E.showPrompt(),d(h.buttons[n[l]]))})})})})